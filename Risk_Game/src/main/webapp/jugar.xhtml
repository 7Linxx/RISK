<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head>
	<title>Risk Global Domination</title>
	<link rel="stylesheet" href="styles/jugar.css"></link>
	<script src="js/menu.js"></script>
	<script>
		 
	</script>
</h:head>
<h:body>
	<div class="container">
		<div class="header">
			<img class="logo-risk" src="images/logo.png" alt="Risk Logo" />
			<div class="settings-area">
				<button class="gear" id="gearBtn" type="button"
					aria-label="Configuración"
					onclick="toggleMenu(); event.stopPropagation();">
					<img src="images/setting.png" class="gear-img" alt="Configuración" />
				</button>
				<div id="settingsMenu" class="settings-menu">
					<div class="settings-menu-item"
						onclick="window.location='historial.xhtml'">Historial</div>
					<div class="settings-menu-item"
						onclick="window.location='reglas.xhtml'">Reglas</div>
					<div class="settings-menu-item"
						onclick="window.location='index.xhtml'">Cerrar sesión</div>
				</div>
			</div>
		</div>
		<div class="map-section">
			<h:commandButton id="btn-jugar" styleClass="play-btn" value="JUGAR"
				onclick="showGameModes(); return false;" />

			<div id="game-mode-panel" style="display: none;">
				<button type="button" class="back-arrow-btn"
					onclick="backToMainPanel()">
					<svg class="arrow-svg" viewBox="0 0 42 42"> <polyline
						points="30,4 11,21 30,38" /> </svg>
				</button>
				<div class="game-mode-header">
					<span class="game-mode-title">Escoge un modo de juego</span>
				</div>
				<div class="game-modes-row">
					<button class="mode-btn"
						onclick="selectMode('Conquista'); return false;">Conquista
						el mundo</button>
					<button class="mode-btn"
						onclick="selectMode('Secreta'); return false;">Misión
						Secreta</button>
					<button class="mode-btn"
						onclick="selectMode('Capitales'); return false;">Capitales</button>
				</div>
			</div>

			<div id="player-count-panel" style="display: none;">
				<button type="button" class="back-arrow-btn"
					onclick="backToModePanel()">
					<svg class="arrow-svg" viewBox="0 0 42 42"> <polyline
						points="30,4 11,21 30,38" /> </svg>
				</button>
				<div class="game-mode-header">
					<span class="game-mode-title" id="player-count-title">
						¿Cuántos jugadores van a jugar? </span>
				</div>
				<h:form id="playersForm">
					<h:inputHidden id="selectedMode" value="#{MapBean.selectedMode}" />
					<div class="game-modes-row">
						<h:commandButton value="2 jugadores" styleClass="mode-btn"
							update="flogin" oncomplete="showLogin()"
							action="#{MapBean.setNumPlayers(2)}" />
						<h:commandButton value="3 jugadores" styleClass="mode-btn"
							action="#{MapBean.setPlayersAndGo(3)}" onclick="showUsersInfo()" />
					</div>
					<div class="game-modes-row">
						<h:commandButton value="4 jugadores" styleClass="mode-btn"
							action="#{MapBean.setPlayersAndGo(4)}" onclick="showUsersInfo()" />
						<h:commandButton value="Solitario" styleClass="mode-btn"
							action="#{MapBean.setPlayersAndGo(1)}" onclick="showUsersInfo()" />
					</div>
				</h:form>
			</div>
			<h:form id="flogin">
				<p:growl id="growl" showDetail="true" />
				<p:growl id="growl-sticky" for="sticky-key" showDetail="true"
					sticky="true" />
				<div id="user-info" style="display: none;">
					<div id="login" class="login">
						<button class="close-btn" type="button" onclick="closeLogin()">x</button>

						<!-- Jugador 1 siempre: usuario actual, campo readonly -->
						<c:if test="#{MapBean.numPlayers gt 1}">
							<div class="information">
								<label>Información Jugador 1:</label>
								<h:panelGrid columns="2" cellpadding="4">
									<h5>Tu usuario</h5>
									<span class="ui-float-label"> <p:inputText id="name1"
											value="#{MapBean.names[0]}" readonly="true"
											styleClass="risk-input" placeholder="usuario"
											style="background-color:#eee;color:#333;font-weight:bold;" />
									</span>
									<h5>Color</h5>
									<p:colorPicker id="thumbnail1" value="#{MapBean.colors[0]}"
										swatchesOnly="true" theme="polaroid" clearButton="true"
										closeButton="true" inline="true"
										swatches="#F35B04,#F5BB00,#A755C2,#016FB9,#61C9A8,#F09B59">
									</p:colorPicker>
								</h:panelGrid>
							</div>
						</c:if>
						<!-- Jugador 2 -->
						<c:if test="#{MapBean.numPlayers ge 2}">
							<p:divider layout="vertical" />
							<div class="information">
								<label>Información Jugador 2:</label>
								<h:panelGrid columns="2" cellpadding="4">
									<h5>Nombre</h5>
									<span class="ui-float-label"> <p:inputText id="name2"
											value="#{MapBean.names[1]}" styleClass="risk-input"
											placeholder="nombre" />
									</span>
									<h5>Color</h5>
									<p:colorPicker id="thumbnail2" value="#{MapBean.colors[1]}"
										swatchesOnly="true" theme="polaroid" clearButton="true"
										closeButton="true" inline="true"
										swatches="#F35B04,#F5BB00,#A755C2,#016FB9,#61C9A8,#F09B59">
									</p:colorPicker>
								</h:panelGrid>
							</div>
						</c:if>
						<!-- Jugador 3 -->
						<c:if test="#{MapBean.numPlayers ge 3}">
							<p:divider layout="vertical" />
							<div class="information">
								<label>Información Jugador 3:</label>
								<h:panelGrid columns="2" cellpadding="4">
									<h5>Nombre</h5>
									<span class="ui-float-label"> <p:inputText id="name3"
											value="#{MapBean.names[2]}" styleClass="risk-input"
											placeholder="nombre" />
									</span>
									<h5>Color</h5>
									<p:colorPicker id="thumbnail3" value="#{MapBean.colors[2]}"
										swatchesOnly="true" theme="polaroid" clearButton="true"
										closeButton="true" inline="true"
										swatches="#F35B04,#F5BB00,#A755C2,#016FB9,#61C9A8,#F09B59">
									</p:colorPicker>
								</h:panelGrid>
							</div>
						</c:if>
						<!-- Jugador 4 -->
						<c:if test="#{MapBean.numPlayers eq 4}">
							<p:divider layout="vertical" />
							<div class="information">
								<label>Información Jugador 4:</label>
								<h:panelGrid columns="2" cellpadding="4">
									<h5>Nombre</h5>
									<span class="ui-float-label"> <p:inputText id="name4"
											value="#{MapBean.names[3]}" styleClass="risk-input"
											placeholder="nombre" />
									</span>
									<h5>Color</h5>
									<p:colorPicker id="thumbnail4" value="#{MapBean.colors[3]}"
										swatchesOnly="true" theme="polaroid" clearButton="true"
										closeButton="true" inline="true"
										swatches="#F35B04,#F5BB00,#A755C2,#016FB9,#61C9A8,#F09B59">
									</p:colorPicker>
								</h:panelGrid>
							</div>
						</c:if>

						<!-- Botón continuar -->
						<p:commandButton
							styleClass="rounded-button ui-button-warning login-btn"
							value="Continuar" action="#{MapBean.init}" update="growl" />
					</div>
				</div>

			</h:form>

		</div>

	</div>

</h:body>
</html>